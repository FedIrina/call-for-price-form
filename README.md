# Call for Price Form

Плагин для WooCommerce, который добавляет функциональность "Запросить цену" для товаров без цены.

## Описание

Этот плагин автоматически заменяет кнопку "Добавить в корзину" на кнопку "Запросить цену" для товаров WooCommerce, у которых не установлена цена. При нажатии на кнопку открывается модальное окно с формой Contact Form 7 для отправки запроса на получение цены.

## Возможности

- **Простые товары**: Автоматическая замена кнопки "Добавить в корзину" на "Запросить цену" для товаров без цены
- **Вариативные товары**: Динамическое переключение между кнопками в зависимости от наличия цены у выбранной вариации
- **Модальное окно**: Bootstrap модальное окно с формой Contact Form 7
- **Передача данных**: Автоматическая передача информации о товаре и вариации в форму
- **Формирование названий**: Автоматическое формирование полного названия вариации с атрибутами и артикулом

## Требования

- WordPress 5.0 или выше
- WooCommerce 5.0 или выше
- Contact Form 7 (для работы формы)
- Bootstrap 5 (для модального окна)

## Установка

1. Скопируйте папку `call-for-price-form` в директорию `/wp-content/plugins/`
2. Активируйте плагин в админ-панели WordPress
3. Убедитесь, что у вас установлен и активирован Contact Form 7
4. Создайте форму в Contact Form 7 для обработки запросов цен

## Настройка

### Страница настроек

Плагин добавляет отдельную вкладку "Запрос цены" в настройки WooCommerce (WooCommerce → Настройки → Запрос цены). На этой странице вы можете:

- **Выбрать форму Contact Form 7** - выберите из списка созданных форм
- **Настроить текст кнопки** - измените текст кнопки "Запросить цену"
- **Настроить заголовок модального окна** - измените заголовок модального окна
- **Посмотреть инструкции** - подробные инструкции по настройке формы Contact Form 7

### ID формы Contact Form 7

По умолчанию плагин использует форму с ID = 1. Чтобы изменить ID формы, используйте страницу настроек плагина или добавьте в файл `functions.php` вашей темы:

```php
add_filter('call_for_price_form_id', function() {
    return 123; // Замените на ID вашей формы
});
```

### Настройка формы Contact Form 7

В форме Contact Form 7 вы можете использовать следующие поля для получения информации о товаре:

- `[hidden product_id]` - ID товара
- `[hidden product_name]` - Название товара
- `[hidden product_url]` - URL страницы товара
- `[hidden variation_id]` - ID вариации (если есть)
- `[hidden variation_name]` - Название вариации (если есть)

### Пример формы Contact Form 7

```
<label>Ваше имя *
    [text* your-name]
</label>

<label>Email *
    [email* your-email]
</label>

<label>Телефон
    [tel your-phone]
</label>

<label>Сообщение
    [textarea your-message]
</label>

[hidden product_id]
[hidden product_name]
[hidden product_url]
[hidden variation_id]
[hidden variation_name]

[submit "Отправить запрос"]
```

## Структура файлов

```
call-for-price-form/
├── call-for-price-form.php          # Основной файл плагина
├── includes/
│   ├── class-call-for-price-form-functions.php    # Класс функций
│   ├── class-call-for-price-form-templates.php    # Класс шаблонов
│   └── class-call-for-price-form-settings.php     # Класс настроек
├── templates/
│   └── single-product/
│       └── add-to-cart/
│           ├── simple.php                          # Шаблон простого товара
│           └── variation-add-to-cart-button.php    # Шаблон вариативного товара
├── assets/
│   ├── js/
│   │   ├── request-price-modal.js                 # JavaScript для модального окна
│   │   └── variation-handler.js                   # JavaScript для вариаций
│   └── css/
│       └── request-price-modal.css                # Стили модального окна
├── languages/
│   └── call-for-price-form-ru_RU.po               # Файл переводов для русского языка
└── README.md
```

## Кастомизация

### Изменение стилей

Для изменения стилей кнопок и модального окна отредактируйте файл `assets/css/request-price-modal.css`.

### Изменение текста

Для изменения текста кнопок отредактируйте файлы шаблонов в папке `templates/`.

### Добавление новых полей

Для добавления новых полей в форму отредактируйте файл `assets/js/request-price-modal.js`.

## Поддержка

Если у вас возникли вопросы или проблемы с плагином, обратитесь к разработчику.

## Версия

Текущая версия: 1.0.0

## Лицензия

Этот плагин разработан для внутреннего использования. 